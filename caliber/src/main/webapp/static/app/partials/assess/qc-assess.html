<!-- Year selector and Add Assessment button -->
<div ng-hide="showMe">
	<div class="container">
		<div class="row">
			<!-- Back button, only shows when there are no batches -->
			<div class="col-lg-12 col-md-12 col-sm-12" ng-show="!currentView">
				<button class="btn back-btn" ng-click="back()">
					<span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
					Back
				</button>
			</div>
			<div class="col-md-12 col-lg-12 top10">

				<!-- top ui dropdown for available years -->
				<ul class="nav nav-tabs" ng-show="currentView">
					<li role="button" class="dropdown"><a class="dropdown-toggle"
						data-toggle="dropdown"> {{ selectedYear }} <span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li ng-repeat="menuItem in years track by $index"><a
								role="button" ng-click="selectYear($index); checkBatch();">{{menuItem}}</a></li>
						</ul></li>

					<!-- top ui for viewing all assessments -->
					<li role="button" class="dropdown" ng-show="!noBatches"><a
						class="dropdown-toggle" data-toggle="dropdown"> {{
							trainingNameDate }} <span class="caret"></span>
					</a>
						<ul class="dropdown-menu">
							<li ng-repeat="batch in batchesByYear track by $index"><a
								role="button" ng-click="selectCurrentBatch($index)"> {{
									batch.trainingName }} - {{ batch.startDate }} </a>
						</ul></li>
				</ul>

				<!-- top ui for viewing trainee grades -->
				<ul class="nav nav-tabs" ng-show="!currentView">
					<li role="button" class="dropdown"><a class="dropdown-toggle"
						data-toggle="dropdown"> {{ currentAssessment.title }} <span
							class="caret"></span></a>
						<ul class="dropdown-menu">
							<li ng-repeat="assessment in currentAssessments track by $index">
								<a role="button" ng-click="selectAssessment($index)"> {{
									assessment.title }} </a>
							</li>
						</ul></li>
				</ul>
			</div>
			<!-- Display all the weeks in the current selected batch -->
			<div class="col-sm-12 col-md-12 col-lg-12 top5" ng-show="!noBatches">
				<ul class="nav nav-tabs">
					<li role="button" class="{{showActiveWeek($index)}}"
						ng-click="selectWeek($index)"
						ng-repeat="week in weeks track by $index"><a>Week
							{{week}}</a></li>
					<li role="button" ng-show="!noBatches" data-toggle="modal"
						data-target="#confirmingweeks"><a><span
							class="glyphicon glyphicon-plus" aria-hidden="true"></span></a></li>
				</ul>
			</div>
		</div>
	</div>
	
<!-- loading the conferming week model for vp -->
	<div id="confirmingweeks" class="modal fade">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-body">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<div class="text-center">
				<h4>Add a new week?</h4>
				<h4>This process cannot be undone.</h4>
				</div>
			</div>
			<div class="modal-footer">
				<button id="yesBtn" type="button" class="btn btn-primary"
					ng-click="createWeek()" data-dismiss="modal">Yes</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">No</button>
			</div>
		</div>
	</div>
</div>
	<!-- Assessments table -->
	<div class="container">
		<div class="row" id="qcTrainees">
			<div class="col-md-12 col-lg-12 top5">
				<!-- Display if no current batches are available in selected year -->
				<p class="bg-primary align center" ng-show="noBatches">{{noBatchesMessage}}</p>
				<ul class="nav nav-tabs" ng-show="!noBatches">
					<!-- Accordian table -->
					<table class="table table-condensed"
						style="border-collapse: collapse;" ng-show="currentView">
						<thead>
							<tr>
								<strong>Categories covered this week: </strong>
								<span ng-repeat="category in categories">{{category}}{{$last
									? '' : ', '}}</span>
							</tr>
							<!-- Columns for selected batch -->
							<tr sticky>
								<th>Trainee</th>
								<th>Individual Feedback</th>
								<th>Notes</th>
							</tr>
						</thead>
						<tbody>
							<!-- Displays a list of all trainees still active in the batch -->
							<tr ng-repeat="trainee in currentBatch.trainees track by $index">
								<td>{{ trainee.name }}</td>
								<!-- Icons: question mark in circle by default. 
								  		Otherwise shows the status type (icons) -->
								<td><span ng-hide="faces[$index].qcStatus"
									class="col-lg-2 col-md-2 col-sm-2 col-sm-offset-1"
									title="Click to update your feedback."
									alt="Click to update your feedback."
									ng-click="pickIndividualStatus(trainee.name, qcStatusTypes[0], $index);">
										<i class="fa fa-question-circle fa-2x"></i>
								</span>
									<div ng-hide="faces[$index].qcStatus !== qcStatusTypes[0]"
										title="Excellent"
										class="col-lg-2 col-md-2 col-sm-2 col-sm-offset-1"
										ng-click="pickIndividualStatus(trainee.name, qcStatusTypes[1], $index);">
										<i class="fa fa-star fa-2x pick"></i>
									</div>
									<div ng-hide="faces[$index].qcStatus !== qcStatusTypes[1]"
										title="Good"
										class="col-lg-2 col-md-2 col-sm-2 col-sm-offset-1"
										ng-click="pickIndividualStatus(trainee.name, qcStatusTypes[2], $index);">
										<i class="fa fa-smile-o fa-2x pick"></i>
									</div>
									<div ng-hide="faces[$index].qcStatus !== qcStatusTypes[2]"
										title="Fair"
										class="col-lg-2 col-md-2 col-sm-2 col-sm-offset-1"
										ng-click="pickIndividualStatus(trainee.name, qcStatusTypes[3], $index);">
										<i class="fa fa-meh-o fa-2x pick"></i>
									</div>
									<div ng-hide="faces[$index].qcStatus !== qcStatusTypes[3]"
										title="Poor"
										class="col-lg-2 col-md-2 col-sm-2 col-sm-offset-1"
										ng-click="pickIndividualStatus(trainee.name, qcStatusTypes[0], $index);">
										<i class="fa fa-frown-o fa-2x pick"></i>
									</div></td>
								<!-- Notes on each trainee. Each time you edit it, it will save it when you leave textfield -->
								<td class="col-sm-9 col-md-9 col-lg-9"><textarea
										ng-model="noteOnTrainee($index).content" id="noteTextArea"
										class="form-control" placeholder="Note on {{trainee.name}}"
										ng-blur="saveTraineeNote($index)" rows="3" cols="75"
										maxlength="1000"></textarea></td>
								<td><ul class="nav nav-tabs">
							</tr>
						</tbody>
					</table>
			</div>
		</div>
		<!-- Bottom UI: QC batch note -- overall qualitative feedback -->
		<div class="row" ng-show="!noBatches">
			<h4 class="text-center">Overall Feedback</h4>
			<!-- Shows the status type (icons) -->
			<div class="col-lg-2 col-md-2 col-sm-2 col-sm-offset-1"
				ng-click="pickOverallStatus(currentBatch, qcStatusTypes[0])">
				<i class="fa fa-star fa-2x"
					ng-class="{pick : qcBatchAssess === qcStatusTypes[0]}"></i>
			</div>
			<div class="col-lg-2 col-md-2 col-sm-2 col-sm-offset-1"
				ng-click="pickOverallStatus(currentBatch, qcStatusTypes[1])">
				<i class="fa fa-smile-o fa-2x"
					ng-class="{pick : qcBatchAssess === qcStatusTypes[1]}"></i>
			</div>
			<div class="col-lg-2 col-md-2 col-sm-2 col-sm-offset-1"
				ng-click="pickOverallStatus(currentBatch, qcStatusTypes[2])">
				<i class="fa fa-meh-o fa-2x"
					ng-class="{pick : qcBatchAssess === qcStatusTypes[2]}"></i>
			</div>
			<div class="col-lg-2 col-md-2 col-sm-2 col-sm-offset-1"
				ng-click="pickOverallStatus(currentBatch, qcStatusTypes[3])">
				<i class="fa fa-frown-o fa-2x"
					ng-class="{pick : qcBatchAssess === qcStatusTypes[3]}"></i>
			</div>
			<!-- Show the QC feedback notes. Clicking textfield, editing and overwriting it will 
				trigger the ng-blur to save the data  -->
			<div
				class="form-group col-lg-12 col-md-12 col-sm-12 overall-feedback">
				<textarea ng-model="bnote.content" class="form-control"
					id="qcBatchNotes" ng-blur="saveQCNotes()" maxlength="1000"
					placeholder="Enter your overall feedback on the batch" required>
				</textarea>
				<!-- QC Save burrito button (Burrito: wrap up edited objects, pack it tightly in the skin, and
					save it all in your stomach/database -->
				<div class='save-button-wrapper'>
					<a ng-click="saveQCandTrainee()" ng-show="showFloppy"
						class='save-button fade-in'> <span
						class="fa fa-floppy-o fa-2x" aria-hidden="true"></span>Save
					</a>
					<!-- Events after clicking save button -->
					<div class='spinner fa-style' ng-show="showSaving">
						<i style="color: #F26925;" role="button"
							class="fa fa-spinner fa-spin fa-2x" aria-hidden="true"></i>
					</div>
					<div id="checkMark" class='spinner fade fa-style'
						ng-show="showCheck">
						<i role="button" class="fa fa-check fa-2x" aria-hidden="true"></i>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- overall -->
</div>
<div ui-view="confirm-add-weeks-modal"></div>