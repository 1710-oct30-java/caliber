<div id="manage">
	<div class="container">
		<div class="row">
			<div class="col-md-12 col-lg-12">
				<ul class="nav nav-tabs">
					<!-- Filter batches by year -->
					<li role="button" class="dropdown"><a class="dropdown-toggle"
						data-toggle="dropdown">{{selectedYear}}<span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li ng-repeat="menuItem in years track by $index"><a
								role="button" ng-click="selectYear($index)">{{menuItem}}</a></li>
						</ul></li>
					<!-- Button Trigger for Create Batch Modal -->
					<li role="button" class="pull-right" data-toggle="modal"
						data-target="#createBatchModal" ng-click="resetBatchForm()"><a>Create
							Batch<span class="glyphicon glyphicon-plus" aria-hidden="true">
						</span>
					</a></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- Manage batch table -->
	<div class="container">
		<div class="row">
			<div class="col-md-12 col-lg-12">
				<table class="table table-hover">
					<thead>
						<tr>
							<th>Training Name</th>
							<th>Training Type</th>
							<th>Skill Type</th>
							<th>Trainer</th>
							<th>Co-Trainer</th>
							<th>Location</th>
							<th>Start Date</th>
							<th>End Date</th>
							<th>Good Grade</th>
							<th>Passing Grade</th>
							<th></th>
							<th></th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="batch in selectedBatches track by $index">
							<td>{{batch.trainingName}}</td>
							<td>{{batch.trainingType}}</td>
							<td>{{batch.skillType}}</td>
							<td>{{batch.trainer.name}}</td>
							<td>{{batch.coTrainer.name}}</td>
							<td>{{batch.location}}</td>
							<td>{{batch.startDate|date}}</td>
							<td>{{batch.endDate|date}}</td>
							<td>{{batch.goodGradeThreshold}}</td>
							<td>{{batch.borderlineGradeThreshold}}</td>
							<td>
								<!-- Button Trigger for Add Trainee Modal --> <a role="button"
								data-toggle="modal"
								ng-click="resetTraineeForm();selectCurrentBatch($index)"
								data-target="#viewTraineeModal"><span
									class="glyphicon glyphicon-user"><p align="center">{{batch.trainees.length}}</p></span>
							</a>
							</td>
							<td><a role="button" class="pull-right"
								ng-click="populateBatch(batch);selectCurrentBatch($index)"
								data-toggle="modal" data-target="#createBatchModal"><span
									class="glyphicon glyphicon-pencil" aria-hidden="true"> </span></a></td>
							<td><a role="button" class="pull-right"
								ng-click="selectCurrentBatch($index)" data-toggle="modal"
								data-target="#deleteBatchModal"><span
									class="glyphicon glyphicon-remove" aria-hidden="true"> </span></a></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<div ui-view = "batch-form"></div>

	<!--********************************************* Confirm Batch Delete Modal ************************************-->
	<form ng-submit="deleteBatch()">
		<div class="modal fade" id="deleteBatchModal" tabindex="-1"
			role="dialog" aria-labelledby="batchModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="batchModalLabel">Confirm Batch
							Delete</h4>
					</div>
					<div class="modal-body">
						<!-- Add Batch Info -->
						<h3>Are you sure you want to delete batch
							{{currentBatch.trainingName}}?</h3>
						<br /> <span ng-if="trainees.length > 1"> There are
							{{trainees.length}} trainees in this batch. </span> <span
							ng-if="trainees.length === 1"> There is only 1 trainee in
							this batch. </span> <span ng-if="trainees.length === 0|| !trainees">
							There are no trainees in this batch. </span>
					</div>
					<div class="modal-footer">
						<input type="submit" value="Delete" class="btn btn-lg btn-danger">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					</div>
				</div>

			</div>

		</div>
	</form>
	<!--*********************************************  Batch Delete ERROR Modal ************************************-->

	<div class="modal fade" id="deleteBatchErrorModal" tabindex="-1"
		role="dialog" aria-labelledby="batchModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="batchModalLabel">
						Error &nbsp;<i class="fa fa-frown-o fa-2x pick" aria-hidden="true"></i>
					</h4>
				</div>
				<div class="modal-body">
					<!-- Add Batch Info -->
					Cannot delete a Batch in progress. <br> Please look forward to
					it! <br />

				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
				</div>
			</div>

		</div>

	</div>

	<!--********************************************* Check Batch Modal   ************************************-->
	<form>
		<div class="modal fade" id="checkBatchModal" tabindex="-1"
			role="dialog" aria-labelledby="batchModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title" id="batchModalLabel">
							Invalid Batch Info&nbsp;<i class="fa fa-frown-o fa-2x pick"
								aria-hidden="true"></i>
						</h4>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>

					</div>
					<div class="modal-body">

						<p>
							The Start Date should be before the End Date. <br /> Trainer and
							Co-trainer cannot be the same
						</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
					</div>
				</div>
			</div>
		</div>
	</form>

	<div ui-view="view-trainees"></div>
	<div ui-view="trainee-form"></div>
	<div ui-view="duplicate-email"></div>
	<div ui-view="delete-trainee"></div>

</div>

